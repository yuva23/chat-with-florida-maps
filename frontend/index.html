<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat with Florida Maps</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }

    #map {
      height: 100vh;
      width: 100%;
    }

    .title {
      position: absolute;
      top: 10px;
      left: 50px;
      z-index: 1000;
      background: white;
      padding: 10px 14px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="title">
  ðŸ§  Chat with Florida Maps (GeoAI Demo)
</div>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  // -----------------------------
  // Map setup
  // -----------------------------
  const map = L.map("map").setView([27.8, -81.7], 7);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: "Â© OpenStreetMap contributors"
  }).addTo(map);

  // -----------------------------
  // Layer styles
  // -----------------------------
  const countyStyle = {
    color: "#555",
    weight: 1,
    fillOpacity: 0.1
  };

  const affectedStyle = {
    color: "red",
    weight: 2,
    fillOpacity: 0.4
  };

  const riverStyle = {
    color: "blue",
    weight: 1
  };

  const waterStyle = {
    color: "cyan",
    weight: 1,
    fillOpacity: 0.5
  };

  // -----------------------------
  // Load GeoJSON layers
  // -----------------------------
  const layers = {};

  fetch("../data/counties.geojson")
    .then(r => r.json())
    .then(data => {
      layers["Counties"] = L.geoJSON(data, { style: countyStyle });
      layers["Counties"].addTo(map);
    });

  fetch("../data/rivers.geojson")
    .then(r => r.json())
    .then(data => {
      layers["Rivers"] = L.geoJSON(data, { style: riverStyle });
      layers["Rivers"].addTo(map);
    });

  fetch("../data/waterbodies.geojson")
    .then(r => r.json())
    .then(data => {
      layers["Waterbodies"] = L.geoJSON(data, { style: waterStyle });
      layers["Waterbodies"].addTo(map);
    });

  fetch("../output/counties_near_rivers.geojson")
    .then(r => r.json())
    .then(data => {
      layers["Affected Counties (AI Result)"] =
        L.geoJSON(data, { style: affectedStyle });
      layers["Affected Counties (AI Result)"].addTo(map);
    });

  // -----------------------------
  // Layer control
  // -----------------------------
  setTimeout(() => {
    L.control.layers(null, layers).addTo(map);
  }, 1500);
</script>

</body>
</html>
